<h2 class="text-center">Reportes Generados</h2>



<table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

  <!--- Note that these columns can be defined in any order.
        The actual rendered columns are set as a property on the row definition" -->

  <!-- Position Column -->
  <ng-container matColumnDef="numeroreporte">
    <th mat-header-cell *matHeaderCellDef> N° Reporte </th>
    <td mat-cell *matCellDef="let element"> {{element.numeroreporte}} </td>
  </ng-container>

  <!-- Name Column -->
  <ng-container matColumnDef="fechareporte">
    <th mat-header-cell *matHeaderCellDef> Fecha Reporte </th>
    <td mat-cell *matCellDef="let element"> {{element.fechareporte | date:'dd-MM-yyyy'  }} </td>
  </ng-container>

  <!-- Weight Column -->
  <ng-container matColumnDef="tiporeporte">
    <th mat-header-cell *matHeaderCellDef> Tipo Reporte </th>
    <td mat-cell *matCellDef="let element"> {{element.tiporeporte}} </td>
  </ng-container>

  <!-- Symbol Column -->
  <ng-container matColumnDef="tipoproblema">
    <th mat-header-cell *matHeaderCellDef> Tipo Problema </th>
    <td mat-cell *matCellDef="let element"> {{element.tipoproblema}} </td>
  </ng-container>

  <ng-container matColumnDef="resuelto">
    <th mat-header-cell *matHeaderCellDef> Resuelto </th>
    <td mat-cell *matCellDef="let element"> {{element.resuelto}} </td>
  </ng-container>

  <ng-container matColumnDef="complejidad">
    <th mat-header-cell *matHeaderCellDef> Conplejidad </th>
    <td mat-cell *matCellDef="let element"> {{element.complejidad}} </td>
  </ng-container>

  <ng-container matColumnDef="criticidad">
    <th mat-header-cell *matHeaderCellDef> Criticidad </th>
    <td mat-cell *matCellDef="let element"> {{element.criticidad}} </td>
  </ng-container>

  <ng-container matColumnDef="rut">
    <th mat-header-cell *matHeaderCellDef> Rut </th>
    <td mat-cell *matCellDef="let element"> {{element.rut}} </td>
  </ng-container>

  <ng-container matColumnDef="nombre">
    <th mat-header-cell *matHeaderCellDef> Nombre </th>
    <td mat-cell *matCellDef="let element"> {{element.nombre}} </td>
  </ng-container>

  <ng-container matColumnDef="servicio">
    <th mat-header-cell *matHeaderCellDef> Servicio </th>
    <td mat-cell *matCellDef="let element"> {{element.servicio}} </td>
  </ng-container>

  <ng-container matColumnDef="cargo">
    <th mat-header-cell *matHeaderCellDef> Cargo </th>
    <td mat-cell *matCellDef="let element"> {{element.cargo}} </td>
  </ng-container>

  <ng-container matColumnDef="nivel">
    <th mat-header-cell *matHeaderCellDef> Nivel </th>
    <td mat-cell *matCellDef="let element"> {{element.nivel}} </td>
  </ng-container>

  <ng-container matColumnDef="responsable">
    <th mat-header-cell *matHeaderCellDef> Responsable </th>
    <td mat-cell *matCellDef="let element"> {{element.responsable}} </td>
  </ng-container>

  <ng-container matColumnDef="tiemporesolucion">
    <th mat-header-cell *matHeaderCellDef> Tiempo Resolución </th>
    <td mat-cell *matCellDef="let element"> {{element.tiemporesolucion}} </td>
  </ng-container>

  <ng-container matColumnDef="tiemporestante">
    <th mat-header-cell *matHeaderCellDef> Tiempo Restante </th>
    <td mat-cell *matCellDef="let element"> {{element.tiemporestante}} </td>
  </ng-container>
 <!--(click)="clickedRows.add(row)" 

-->

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row 
  (click)="getRecord(row.numeroreporte)"
  *matRowDef="let row; columns: displayedColumns;"></tr>
</table>

<br/>

<div class="col-md-12">
  <button mat-raised-button color="warn" (click)="Salir()"  mat-dialog-close [disabled]="btnSalir" style="margin-right: 80%;" >Salir</button>
  <button mat-raised-button color="warn" (click)="Nuevo()"  mat-dialog-close [disabled]="btnNuevo" style="" >Nuevo</button>
  &nbsp;&nbsp;
  <button mat-raised-button color="warn" (click)="Imprimir()"  mat-dialog-close [disabled]="btnImprimir" style="" >Imprimir</button>
  
</div>


<div *ngIf="popupedicionreporte" >     

<h2 class="text-center">{{textopopupedicionreporte}} {{numeroreporte}}</h2>

<mat-accordion>

  <mat-expansion-panel (opened)="panelOpenState = true"
  (closed)="panelOpenState = false">
<mat-expansion-panel-header>
<mat-panel-title>
<h2>Autor Reporte</h2> 
</mat-panel-title>
</mat-expansion-panel-header>

<mat-form-field class="example-full-width" appearance="fill">
  <mat-label>Rut</mat-label> 
  <input matInput>
</mat-form-field>
  <br/>
  <mat-form-field class="example-full-width" appearance="fill">
  <mat-label>Nombre</mat-label> 
  <input matInput>
</mat-form-field>
  <br/>
  <mat-form-field appearance="fill">
    <mat-label>Servicio</mat-label>
    <mat-select>
      <mat-option *ngFor="let servicio of servicios" [value]="servicio.value">
        {{servicio.viewValue}}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <br/>
  <mat-form-field appearance="fill">
    <mat-label>Cargo</mat-label>
    <mat-select>
      <mat-option *ngFor="let cargo of cargos" [value]="cargo.value">
        {{cargo.viewValue}}
      </mat-option>
    </mat-select>
  </mat-form-field>



</mat-expansion-panel>


<mat-expansion-panel (opened)="panelOpenState = true"
(closed)="panelOpenState = false">
<mat-expansion-panel-header>
<mat-panel-title>
<h2>Datos del Reporte</h2> 
</mat-panel-title>
</mat-expansion-panel-header>

<mat-form-field appearance="fill">
  <mat-label>Tipo de Problema</mat-label>
  <mat-select>
    <mat-option *ngFor="let tipoproblema of tipoproblemas" [value]="tipoproblema.value">
      {{tipoproblema.viewValue}}
    </mat-option>
  </mat-select>
</mat-form-field>
<br/>
<mat-form-field class="example-full-width" appearance="fill">
  <mat-label>Observaciones</mat-label>
  <textarea matInput placeholder=""></textarea>
</mat-form-field>


</mat-expansion-panel>


<mat-expansion-panel (opened)="panelOpenState = true"
(closed)="panelOpenState = false">
<mat-expansion-panel-header>
<mat-panel-title>
<h2>Adjuntos</h2> 
</mat-panel-title>
</mat-expansion-panel-header>

detalle

</mat-expansion-panel>


<mat-expansion-panel (opened)="panelOpenState = true"
(closed)="panelOpenState = false">
<mat-expansion-panel-header>
<mat-panel-title>
<h2>Diagnóstico Inicial</h2> 
</mat-panel-title>
</mat-expansion-panel-header>


<mat-form-field appearance="fill">
  <mat-label>Tipo de Reporte</mat-label>
  <mat-select>
    <mat-option *ngFor="let tipoproblema of tipoproblemas" [value]="tipoproblema.value">
      {{tipoproblema.viewValue}}
    </mat-option>
  </mat-select>
</mat-form-field>
<br/>
<br/>

<mat-radio-group aria-label="Select an option">
  ¿Pudo resolver el problema?
  <mat-radio-button value="1">SI</mat-radio-button>
  <mat-radio-button value="2">NO</mat-radio-button>
</mat-radio-group>
<br/>

<br/>
<mat-form-field appearance="fill">
  <mat-label>Complejidad</mat-label>
  <mat-select>
    <mat-option *ngFor="let complejidad of complejidades" [value]="complejidad.value">
      {{complejidad.viewValue}}
    </mat-option>
  </mat-select>
</mat-form-field>
<br/>
<mat-form-field appearance="fill">
  <mat-label>Criticidad</mat-label>
  <mat-select>
    <mat-option *ngFor="let criticidad of criticidades" [value]="criticidad.value">
      {{criticidad.viewValue}}
    </mat-option>
  </mat-select>
</mat-form-field>


</mat-expansion-panel>


<mat-expansion-panel *ngIf="btnGrabar"  (opened)="panelOpenState = true"
(closed)="panelOpenState = false">
<mat-expansion-panel-header>
<mat-panel-title>
<h2>Bitácora</h2> 
</mat-panel-title>
</mat-expansion-panel-header>

<table mat-table [dataSource]="dataSource2" class="mat-elevation-z8">

  <!--- Note that these columns can be defined in any order.
        The actual rendered columns are set as a property on the row definition" -->

  <!-- Position Column -->
  <ng-container matColumnDef="fecha">
    <th mat-header-cell *matHeaderCellDef> Fecha </th>
    <td mat-cell *matCellDef="let element"> {{element.fecha | date:'dd-MM-yyyy' }} </td>
  </ng-container>

  <!-- Name Column -->
  <ng-container matColumnDef="actividad">
    <th mat-header-cell *matHeaderCellDef> Actividad </th>
    <td mat-cell *matCellDef="let element"> {{element.actividad  }} </td>
  </ng-container>


  <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns2;"></tr>
</table>
<br/>
<div class="col-md-12">
  <button mat-raised-button color="warn" (click)="Agregar()"  mat-dialog-close [disabled]="btnAgregar" style="float:right;" >Agregar...</button>
</div>



</mat-expansion-panel>



</mat-accordion>
<br/>
<div class="col-md-12">
  <button mat-raised-button color="warn" (click)="Salir2()"  mat-dialog-close [disabled]="btnSalir2" style="margin-right: 76%;" >Salir</button>
  <button mat-raised-button color="warn" (click)="Actualizar()"  mat-dialog-close *ngIf="btnGrabar" [disabled]="btnActualizar" style="" >Actualizar</button>
  &nbsp;&nbsp;
  <button mat-raised-button color="warn" (click)="CerrarReporte()"  mat-dialog-close *ngIf="btnGrabar" [disabled]="btnCerrarReporte" style="" >Cerrar Reporte</button>
  <button mat-raised-button color="warn" (click)="Grabar()"  mat-dialog-close *ngIf="!btnGrabar" [disabled]="btnGrabar" style="" >Grabar</button>

</div>

</div>